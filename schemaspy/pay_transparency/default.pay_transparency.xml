<?xml version="1.0" encoding="UTF-8"?><database name="default" schema="pay_transparency" type="PostgreSQL - 18.1 (Debian 18.1-1.pgdg13+2)">
   <tables>
      <table name="admin_user" remarks="This table stores information about current administrative users of the application, including their roles, status, and relevant user metadata. Administrators are managed through the Single Sign On (SSO) Keycloak service, which is the source-of-truth for authentication, however a record of their information is stored here to easily log activities performed by the admin user. Upon login, if there is ever a difference between SSO Keycloak and this table, this table will be updated with the information from SSO Keycloak. If it is the first time login in after accepting the onboarding email, a new record will be created with information from SSO Keycloak, or an existing record will be updated by setting `is_active` to true." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="admin_user_id" nullable="false" remarks="Primary unique ID for each admin user." size="2147483647" type="uuid" typeCode="1111">
            <child column="admin_user_id" foreignKey="admin_user_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user_history"/>
            <child column="created_by" foreignKey="announcement_created_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement"/>
            <child column="updated_by" foreignKey="announcement_updated_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement"/>
            <child column="created_by" foreignKey="announcement_history_created_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_history"/>
            <child column="updated_by" foreignKey="announcement_history_updated_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_history"/>
            <child column="created_by" foreignKey="announcement_resource_created_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource"/>
            <child column="updated_by" foreignKey="announcement_resource_updated_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource"/>
            <child column="created_by" foreignKey="announcement_resource_history_created_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource_history"/>
            <child column="updated_by" foreignKey="announcement_resource_history_updated_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource_history"/>
            <child column="admin_user_id" foreignKey="admin_user_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
            <child column="admin_user_id" foreignKey="admin_user_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="report_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="idir_user_guid" nullable="false" remarks="Unique identifier for the admin user provided by SSO Keycloak for logging purposes." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="display_name" nullable="false" remarks="The full name of the admin user to be displayed within the application provided by SSO Keycloak." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="3" name="create_date" nullable="false" remarks="Timestamp indicating when the admin user record was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="create_user" nullable="false" remarks="Admin user ID who invited this user. Or this is set to &quot;keycloak&quot; if this user was discovered on the SSO Keycloak service and wasn't invited through the app." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="5" name="update_date" nullable="false" remarks="Timestamp of the most recent update to the admin user record." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="update_user" nullable="false" remarks="Admin user ID who last modified the record. Or this is set to &quot;keycloak&quot; if this updated occurred due to changes discovered on the SSO Keycloak service." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="true" digits="0" id="7" name="is_active" nullable="false" remarks="Boolean flag indicating if the admin user is currently active in the system. Admin users with the admin role can remove users using the webapp. This removes them from SSO Keycloak, and sets `is_active` to false. Users must go through the onboarding process before they can become active again." size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="assigned_roles" nullable="false" remarks="Comma-separated list of roles assigned to the admin user, determining permissions within the application. Currently there are two roles, 'user' and 'admin'. 'admin' is for managing the users, and 'user' is for managing the other features available in the administrative section of the application. An admin user will have either the 'user' role or both 'user' and 'admin' role." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="''::character varying" digits="0" id="9" name="preferred_username" nullable="false" remarks="This field stores the `idir_user_guid` in a consistent string format provided by SSO Keycloak, ensuring reliability for user lookups. While `idir_user_guid` values are case-insensitive and may contain optional dashes (`-`) making direct comparisons challenging, the `preferred_username` field formats the GUID as a standardized string. This consistency simplifies lookups and comparisons within the admin webapp." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="10" name="last_login" nullable="false" remarks="Timestamp of the user's last login. Updating this field does not result in creating a history record." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="''::character varying" digits="0" id="11" name="email" nullable="false" remarks="Email address of the admin user for notifications. For example, all admin users receive an email warning when an announcement is scheduled to expire soon." size="255" type="varchar" typeCode="12"/>
         <primaryKey column="admin_user_id" sequenceNumberInPK="1"/>
         <index name="admin_user_id_pk" unique="true">
            <column ascending="true" name="admin_user_id"/>
         </index>
         <index name="admin_user_idir_user_guid_uk" unique="true">
            <column ascending="true" name="idir_user_guid"/>
         </index>
      </table>
      <table name="admin_user_history" remarks="This table stores the old version of admin users who's roles, active, or other metadata has changed. This table retains a log of modifications to support auditing and historical tracking of admin users. This table is not updated when last_login is updated." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="admin_user_history_id" nullable="false" remarks="Primary unique ID for each record in the history table." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="admin_user_id" nullable="false" remarks="Foreign key reference to the `admin_user` table, linking history to the main user record." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="admin_user_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="idir_user_guid" nullable="false" remarks="Unique identifier for the admin user provided by SSO Keycloak for logging purposes." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="display_name" nullable="false" remarks="The full name of the admin user to be displayed within the application provided by SSO Keycloak." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="create_date" nullable="false" remarks="Timestamp indicating when the admin user record was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="create_user" nullable="false" remarks="Admin user ID who invited this user. Or this is set to &quot;keycloak&quot; if this user was discovered on the SSO Keycloak service and wasn't invited through the app." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="6" name="update_date" nullable="false" remarks="Timestamp of the most recent update to the admin user record." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="update_user" nullable="false" remarks="Admin user ID who last modified the record. Or this is set to &quot;keycloak&quot; if this updated occurred due to changes discovered on the SSO Keycloak service." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="true" digits="0" id="8" name="is_active" nullable="false" remarks="Boolean flag indicating if the admin user is currently active in the system. Admin users with the admin role can remove users using the webapp. This removes them from SSO Keycloak, and sets `is_active` to false. Users must go through the onboarding process before they can become active again." size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="assigned_roles" nullable="false" remarks="Comma-separated list of roles assigned to the admin user, determining permissions within the application. Currently there are two roles, 'user' and 'admin'. 'admin' is for managing the users, and 'user' is for managing the other features available in the administrative section of the application. An admin user will have either the 'user' role or both 'user' and 'admin' role." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="''::character varying" digits="0" id="10" name="preferred_username" nullable="false" remarks="This field stores the `idir_user_guid` in a consistent string format provided by SSO Keycloak, ensuring reliability for user lookups. While `idir_user_guid` values are case-insensitive and may contain optional dashes (`-`), making direct comparisons challenging, the `preferred_username` field formats the GUID as a standardized string. This consistency simplifies lookups and comparisons within the application." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="11" name="last_login" nullable="false" remarks="Timestamp of the user's last login. Updating this field does not result in creating a history record." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="''::character varying" digits="0" id="12" name="email" nullable="false" remarks="Email address of the admin user for notifications. For example, all admin users receive an email warning when an announcement is scheduled to expire soon." size="255" type="varchar" typeCode="12"/>
         <primaryKey column="admin_user_history_id" sequenceNumberInPK="1"/>
         <index name="admin_user_history_id_pk" unique="true">
            <column ascending="true" name="admin_user_history_id"/>
         </index>
      </table>
      <table name="admin_user_onboarding" remarks="This table keeps track of potential admin users awaiting onboarding, including their email, assigned roles, and whether they have completed the onboarding process. Potential admin users are invited by an admin user with the admin role. The user details are given by an admin user, not by any sort of database of users. An email is sent to the person who then has 3 days to accept the invite by logging in. Upon logging in, the `email` is used to lookup the new user in SSO Keycloak, and `assigned_roles` are sent to set permissions. The user must re-log in order to get the new permissions from SSO Keycloak and for `admin_user` table to be updated." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="admin_user_onboarding_id" nullable="false" remarks="Primary unique ID for each onboarding record." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="email" nullable="false" remarks="Email address for the admin user being onboarded, used for communication and identification. Provided by the admin user who created this request." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="first_name" nullable="false" remarks="First name of the admin user for identification purposes during onboarding. Provided by the admin user who created this request." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="assigned_roles" nullable="false" remarks="Roles to be assigned upon onboarding completion, stored as a comma-separated list. Provided by the admin user who created this request." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="create_date" nullable="false" remarks="Timestamp indicating when the onboarding record was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="created_by" nullable="false" remarks="Admin user ID of the admin responsible for initiating the onboarding process." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="false" digits="0" id="6" name="is_onboarded" nullable="false" remarks="Boolean flag indicating whether the admin user has completed onboarding and gained access to the application." size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="7" name="expiry_date" nullable="false" remarks="Expiry date of the onboarding record, after which it may no longer be valid." size="29" type="timestamp" typeCode="93"/>
         <primaryKey column="admin_user_onboarding_id" sequenceNumberInPK="1"/>
         <index name="admin_user_onboarding_id_pk" unique="true">
            <column ascending="true" name="admin_user_onboarding_id"/>
         </index>
      </table>
      <table name="announcement" remarks="This table stores information about announcements created within the application, including details such as title, description, and status, as well as timestamps for tracking creation, publication, and expiration. Announcements are created by admin users. Announcements are only shown to public users who are logged in.&#10;Announcements can be saved with the `status` of 'published' or 'draft'. Draft is to allow the admin user to save their work and come back to edit it later. Published will make the announcement visible to the public users if the current date is between `active_on` and `expires_on`.&#10;&#10;`Status` is automatically set to 'expired' if it is published and the `expired_on` date has passed. Status is changed to 'archived' when the admin user archives an announcement. A monthly scheduled task will remove from the database any announcement who's `updated_date` is over 90 days old and has the `status` 'expired' or 'archived'." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="announcement_id" nullable="false" remarks="Primary Unique identifier for an announcement." size="2147483647" type="uuid" typeCode="1111">
            <child column="announcement_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="announcement_history"/>
            <child column="announcement_id" foreignKey="announcement_resource_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource"/>
            <child column="announcement_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="title" nullable="false" remarks="Title of the announcement displayed to the user." size="100" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="description" nullable="false" remarks="Body of the announcement displayed to the user." size="2147483647" type="text" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="3" name="created_date" nullable="false" remarks="Date when the announcement was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="updated_date" nullable="false" remarks="Date when the announcement was last updated." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="created_by" nullable="true" remarks="The admin user ID who created the announcement." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="announcement_created_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="updated_by" nullable="true" remarks="The admin user ID who last updated the announcement." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="announcement_updated_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="6" id="7" name="active_on" nullable="true" remarks="Date when the announcement becomes visible to the public user, but only if the status is published." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="8" name="expires_on" nullable="true" remarks="Date when the announcement is hidden from the public user. This can be null if an announcement doesn't expire." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="status" nullable="true" remarks="Status of the announcement, defined by the `announcement_status` table. Currently the options are Draft, Published, Expired, or Archived." size="100" type="varchar" typeCode="12">
            <parent column="code" foreignKey="announcement_status_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_status"/>
         </column>
         <primaryKey column="announcement_id" sequenceNumberInPK="1"/>
         <index name="announcement_pkey" unique="true">
            <column ascending="true" name="announcement_id"/>
         </index>
         <index name="announcement_dates_idx" unique="false">
            <column ascending="true" name="active_on"/>
            <column ascending="true" name="expires_on"/>
         </index>
         <index name="announcement_status_idx" unique="false">
            <column ascending="true" name="status"/>
         </index>
      </table>
      <table name="announcement_history" remarks="This table stores old versions of announcements when changes were made. The announcement history is used as an internal historical record, and is not accessible to admin users." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="announcement_history_id" nullable="false" remarks="Primary Unique identifier for an announcement history record." size="2147483647" type="uuid" typeCode="1111">
            <child column="announcement_history_id" foreignKey="announcement_resource_history_announcement_history_id_fkey" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="announcement_id" nullable="true" remarks="The ID of the original announcement." size="2147483647" type="uuid" typeCode="1111">
            <parent column="announcement_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="announcement"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="title" nullable="false" remarks="Title of the announcement." size="100" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="description" nullable="false" remarks="Body of the announcement." size="2147483647" type="text" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="created_date" nullable="false" remarks="Date when the announcement was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="5" name="updated_date" nullable="false" remarks="Date when the announcement was last updated." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="created_by" nullable="true" remarks="The admin user ID who created the announcement." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="announcement_history_created_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="updated_by" nullable="true" remarks="The admin user ID who made this specific record." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="announcement_history_updated_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="6" id="8" name="active_on" nullable="true" remarks="Date when the announcement became visible to the user, but only if the status is published." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="9" name="expires_on" nullable="true" remarks="Date when the announcement was hidden from the user. This could be null if an announcement didn't expire." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="status" nullable="true" remarks="Status of the announcement, defined by the `announcement_status` table. Currently the options are Draft, Published, Expired, or Archived." size="100" type="varchar" typeCode="12">
            <parent column="code" foreignKey="announcement_status_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_status"/>
         </column>
         <primaryKey column="announcement_history_id" sequenceNumberInPK="1"/>
         <index name="announcement_history_pkey" unique="true">
            <column ascending="true" name="announcement_history_id"/>
         </index>
         <index name="announcement_history_dates_idx" unique="false">
            <column ascending="true" name="active_on"/>
            <column ascending="true" name="expires_on"/>
         </index>
         <index name="announcement_history_status_idx" unique="false">
            <column ascending="true" name="status"/>
         </index>
      </table>
      <table name="announcement_resource" remarks="This table lists the resources associated with an announcement. A resource is either a link to a file, or a link to a URL. While the design supports any number of resources existing for each announcement, the webapp limits the user to one of each type, file or link." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="announcement_resource_id" nullable="false" remarks="Primary unique ID for identifying this resource." size="2147483647" type="uuid" typeCode="1111">
            <child column="announcement_resource_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="announcement_id" nullable="false" remarks="The ID of the announcement to which the resource is associated." size="2147483647" type="uuid" typeCode="1111">
            <parent column="announcement_id" foreignKey="announcement_resource_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="display_name" nullable="false" remarks="Display name of the resource. Given by the admin user who added the resource and displayed to the public user as a link." size="100" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="resource_url" nullable="true" remarks="URL where the public user is directed to when accessing the link. Only used if the `resource_type` is 'Link'. Given by the admin user who added the resource." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="created_date" nullable="false" remarks="Date when the resource was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="5" name="update_date" nullable="false" remarks="Date when the resource was last updated." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="created_by" nullable="true" remarks="The admin user ID who created the resource." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="announcement_resource_created_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="updated_by" nullable="true" remarks="The admin user ID who last updated the resource." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="announcement_resource_updated_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="resource_type" nullable="false" remarks="Type of the resource, can be 'Link' or 'Attachment'." size="20" type="varchar" typeCode="12">
            <parent column="code" foreignKey="announcement_resource_type_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource_type"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="attachment_file_id" nullable="true" remarks="A GUID to identify the file in the object storage. Only used if the `resource_type` is 'Attachment'." size="2147483647" type="uuid" typeCode="1111"/>
         <primaryKey column="announcement_resource_id" sequenceNumberInPK="1"/>
         <index name="announcement_resource_pkey" unique="true">
            <column ascending="true" name="announcement_resource_id"/>
         </index>
         <index name="announcement_resource_type_idx" unique="false">
            <column ascending="true" name="resource_type"/>
         </index>
      </table>
      <table name="announcement_resource_history" remarks="Announcement resource history is updated whenever there is change in any record of an announcement resource." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="announcement_resource_history_id" nullable="false" remarks="Primary key for identifying this resource history record." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="announcement_resource_id" nullable="true" remarks="The ID of the original announcement resource." size="2147483647" type="uuid" typeCode="1111">
            <parent column="announcement_resource_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="announcement_id" nullable="false" remarks="The ID of the original announcement to which the resource is associated." size="2147483647" type="uuid" typeCode="1111">
            <parent column="announcement_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="announcement"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="display_name" nullable="false" remarks="Display name of the resource. Given by the admin user who added the resource and displayed to the user as a link." size="100" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="resource_url" nullable="true" remarks="URL where the user is directed to when accessing the link. Only used if the `resource_type` is 'Link'. Given by the admin user who added the resource." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="5" name="created_date" nullable="false" remarks="Date when the resource was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="6" name="update_date" nullable="false" remarks="Date when the resource was last updated." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="created_by" nullable="true" remarks="The admin user ID who created the resource." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="announcement_resource_history_created_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="updated_by" nullable="true" remarks="The admin user ID who last updated the resource." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="announcement_resource_history_updated_by_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="resource_type" nullable="false" remarks="Type of the resource. Limited to the options in the `announcement_resource_type` table. For example, can be 'Link' or 'Attachment'." size="20" type="varchar" typeCode="12">
            <parent column="code" foreignKey="announcement_resource_type_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource_type"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="announcement_history_id" nullable="false" remarks="The ID in the `announcement_history` table to which the resource is associated." size="2147483647" type="uuid" typeCode="1111">
            <parent column="announcement_history_id" foreignKey="announcement_resource_history_announcement_history_id_fkey" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="attachment_file_id" nullable="true" remarks="A unique ID to identify the file in the object storage. Only used if the `resource_type` is 'Attachment'." size="2147483647" type="uuid" typeCode="1111"/>
         <primaryKey column="announcement_resource_history_id" sequenceNumberInPK="1"/>
         <index name="announcement_resource_history_pkey" unique="true">
            <column ascending="true" name="announcement_resource_history_id"/>
         </index>
         <index name="announcement_resource_history_resource_type_idx" unique="false">
            <column ascending="true" name="resource_type"/>
         </index>
      </table>
      <table name="announcement_resource_type" remarks="A lookup table for the types of resources that an announcement can have. Currently two types: Link and Attachment. A human-readable description is provided for each code." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="code" nullable="false" remarks="Unique identifier for the type of a resource. Can be the text 'LINK' or 'ATTACHMENT'." size="20" type="varchar" typeCode="12">
            <child column="resource_type" foreignKey="announcement_resource_type_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource"/>
            <child column="resource_type" foreignKey="announcement_resource_type_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_resource_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="description" nullable="false" remarks="A human readable description of the code." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="2" name="created_date" nullable="false" remarks="Date when the type was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="3" name="updated_date" nullable="false" remarks="Date when the type was last updated." size="29" type="timestamp" typeCode="93"/>
         <primaryKey column="code" sequenceNumberInPK="1"/>
         <index name="announcement_resource_type_pkey" unique="true">
            <column ascending="true" name="code"/>
         </index>
      </table>
      <table name="announcement_status" remarks="A lookup table for the status of an announcement. Currently, there are four statuses: Draft, Published, Expired, and Archived. A human-readable description is provided for each code." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="code" nullable="false" remarks="Code for the status of an announcement. There are four text codes: DRAFT, PUBLISHED, EXPIRED, ARCHIVED." size="20" type="varchar" typeCode="12">
            <child column="status" foreignKey="announcement_status_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement"/>
            <child column="status" foreignKey="announcement_status_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="announcement_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="description" nullable="false" remarks="A human readable description of the code." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="2" name="created_date" nullable="false" remarks="Date when the status was created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="3" name="updated_date" nullable="false" remarks="Date when the status was last updated." size="29" type="timestamp" typeCode="93"/>
         <primaryKey column="code" sequenceNumberInPK="1"/>
         <index name="announcement_status_pkey" unique="true">
            <column ascending="true" name="code"/>
         </index>
      </table>
      <table name="calculated_data_history" remarks="This table stores the calculated data associated with previous versions of published reports. When a report is updated, the report's calculated data is transferred from `pay_transparency_calculated_data` table to the `calculated_data_history` table. The purpose and meaning of the calculated data is described in the comments of the `pay_transparency_calculated_data` table. The calculated data history is used as an internal archival record, and is not accessible to the end user." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="calculated_data_history_id" nullable="false" remarks="The primary ID to identify this specific record in the table" size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="calculated_data_id" nullable="false" remarks="The original ID before moving the record to the history table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="calculated_data_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_calculated_data"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="report_history_id" nullable="false" remarks="Identifies which report that this calculated data history is associated with. This references the primary key of `report_history` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="report_history_id" foreignKey="calculated_data_history_report_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="report_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="report_id" nullable="false" remarks="The ID of the original report associated with the record." size="2147483647" type="uuid" typeCode="1111">
            <parent column="report_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="calculation_code_id" nullable="false" remarks="Identifies which statistic this record is storing. References the primary key of `calculation_code` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="calculation_code_id" foreignKey="calculated_data_history_calculation_code_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="calculation_code"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="value" nullable="true" remarks="The statistic that indicates any disparity in gender pay, which will be shown as a graph in the resulting report. If there is insufficient information to calculate the statistic, `value` will be null." size="50" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="is_suppressed" nullable="false" remarks="Will be set to true if there is not enough information to calculate a statistic. Suppressed statistics are not included in the outputted report." size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="7" name="create_date" nullable="false" remarks="The date and time when this record was inserted into `pay_transparency_calculated_data`." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="8" name="update_date" nullable="false" remarks="The date and time when this record was last modified while in `pay_transparency_calculated_data`. Records in the history table are not modified." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_USER" digits="0" id="9" name="create_user" nullable="false" remarks="The username of the database user who created the record in `pay_transparency_calculated_data`." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_USER" digits="0" id="10" name="update_user" nullable="false" remarks="The username of the database user who modified the record in `pay_transparency_calculated_data`. Records in the history table are not modified." size="255" type="varchar" typeCode="12"/>
         <primaryKey column="calculated_data_history_id" sequenceNumberInPK="1"/>
         <index name="calculated_data_history_pk" unique="true">
            <column ascending="true" name="calculated_data_history_id"/>
         </index>
         <index name="calculated_data_history_report_history_id_calculation_code__key" unique="true">
            <column ascending="true" name="report_history_id"/>
            <column ascending="true" name="calculation_code_id"/>
         </index>
      </table>
      <table name="calculation_code" remarks="This is a lookup table of all 57 statistics, known as 'calculations', that relate to calculating any disparity in gender pay such as the mean hourly pay difference. The webapp has the `calculation_code` in two places, when calculating the statistics to store in the `pay_transparency_calculated_data` table, and when adding the statistics in the report. These operations require looking up either the `calculation_code_id` or the `calculation_code` from this table." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="calculation_code_id" nullable="false" remarks="The ID of the calculation code which is referenced in the two `calculated_data` tables. The webapp uses this ID to lookup the `calculation_code` when retrieving the calculated data for use on the report." size="2147483647" type="uuid" typeCode="1111">
            <child column="calculation_code_id" foreignKey="calculated_data_history_calculation_code_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="calculated_data_history"/>
            <child column="calculation_code_id" foreignKey="calculation_code_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_calculated_data"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="calculation_code" nullable="false" remarks="A unique, human readable string used to identify the algorithm for data calculation. The webapp uses this code to lookup the `calculation_code_id` to save the `value` in the `pay_transparency_calculated_data` table." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="description" nullable="true" remarks="An explanation of the formula used to perform this calculation." size="2147483647" type="text" typeCode="12"/>
         <primaryKey column="calculation_code_id" sequenceNumberInPK="1"/>
         <index name="calculation_code_id_pk" unique="true">
            <column ascending="true" name="calculation_code_id"/>
         </index>
         <index name="calculation_code_calculation_code_key" unique="true">
            <column ascending="true" name="calculation_code"/>
         </index>
      </table>
      <table name="company_history" remarks="This table stores the old company records. If a company has published a report, but has since changed their business address, this table stores the old company address so that generating the old report can display the company information that was originally provided for that report." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="company_history_id" nullable="false" remarks="Primary unique ID for this company history record." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="company_id" nullable="false" remarks="Primary unique ID for this company. Referenced on the `pay_transparency_company` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="company_id" foreignKey="company_history_company_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_company"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="bceid_business_guid" nullable="false" remarks="The BCeID unique ID for this company. Used to associate a user with a company." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="company_name" nullable="false" remarks="The name of the employer provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="create_date" nullable="false" remarks="The date this company record was entered into the `pay_transparency_company` table." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="5" name="update_date" nullable="false" remarks="The date this company record was last updated." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="address_line1" nullable="true" remarks="Street address provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="address_line2" nullable="true" remarks="Optional second address line provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="city" nullable="true" remarks="City provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="province" nullable="true" remarks="Province provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="country" nullable="true" remarks="Country provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="postal_code" nullable="true" remarks="Postal Code provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <primaryKey column="company_history_id" sequenceNumberInPK="1"/>
         <index name="company_history_pk" unique="true">
            <column ascending="true" name="company_history_id"/>
         </index>
         <index name="company_history_bceid_business_guid_idx" unique="false">
            <column ascending="true" name="bceid_business_guid"/>
         </index>
      </table>
      <table name="employee_count_range" numRows="3" remarks="This is a lookup table that stores the employee count ranges, for example &quot;50-100&quot;. The user selects from a list on the form how many employees their employer has which is recorded in the `pay_transparency_report` table." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="employee_count_range_id" nullable="false" remarks="The primary unique id. Used in the two report tables." size="2147483647" type="uuid" typeCode="1111">
            <child column="employee_count_range_id" foreignKey="report_employee_count_range_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
            <child column="employee_count_range_id" foreignKey="report_history_employee_count_range_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="report_history"/>
            <child column="employee_count_range_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="reports_calculated_data_view"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="employee_count_range" nullable="false" remarks="The name of this record which is shown to the user." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="2" name="create_date" nullable="false" remarks="When the value was inserted/created." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="3" name="update_date" nullable="false" remarks="When the value was modified." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="effective_date" nullable="false" remarks="The minimum date for which the range can be visible to the users." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="5" name="expiry_date" nullable="true" remarks="The last day that this value will be shown to the user." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="create_user" nullable="false" remarks="The database user who initially created the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="update_user" nullable="false" remarks="The database user who modified the record." size="255" type="varchar" typeCode="12"/>
         <primaryKey column="employee_count_range_id" sequenceNumberInPK="1"/>
         <index name="employee_count_range_id_pk" unique="true">
            <column ascending="true" name="employee_count_range_id"/>
         </index>
         <index name="employee_count_range_effective_date_expiry_date_idx" unique="false">
            <column ascending="true" name="effective_date"/>
            <column ascending="true" name="expiry_date"/>
         </index>
      </table>
      <table name="flyway_schema_history" remarks="" schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="installed_rank" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="version" nullable="true" remarks="" size="50" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="description" nullable="false" remarks="" size="200" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="type" nullable="false" remarks="" size="20" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="script" nullable="false" remarks="" size="1000" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="checksum" nullable="true" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="installed_by" nullable="false" remarks="" size="100" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="now()" digits="6" id="7" name="installed_on" nullable="false" remarks="" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="execution_time" nullable="false" remarks="" size="10" type="int4" typeCode="4"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="success" nullable="false" remarks="" size="1" type="bool" typeCode="-7"/>
         <primaryKey column="installed_rank" sequenceNumberInPK="1"/>
         <index name="flyway_schema_history_pk" unique="true">
            <column ascending="true" name="installed_rank"/>
         </index>
         <index name="flyway_schema_history_s_idx" unique="false">
            <column ascending="true" name="success"/>
         </index>
      </table>
      <table name="naics_code" numRows="20" remarks="This is a lookup table that stores only the 1st level (of 5 levels) codes of the current North American Industry Classification System (NAICS) data. The user is required to select a NAICS code for each report.&#10;[North American Industry Classification System (NAICS) Canada 2022 Version 1.0](https://www23.statcan.gc.ca/imdb/pUtil.pl?Function=getNote&amp;Id=1369825&amp;NT=45)" schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="naics_code" nullable="false" remarks="The NAICS code which is either a number (eg 11) or a range of numbers (eg 31-33)." size="5" type="varchar" typeCode="12">
            <child column="naics_code" foreignKey="pay_transparency_report_naics_code_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
            <child column="naics_code" foreignKey="report_history_naics_code_fkey" implied="false" onDeleteCascade="false" schema="pay_transparency" table="report_history"/>
            <child column="naics_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="reports_calculated_data_view"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="naics_label" nullable="false" remarks="The name of the sector (eg 'Construction') of the NAICS code." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_DATE" digits="0" id="2" name="effective_date" nullable="false" remarks="The minimum date for which the code can be visible to the users." size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="expiry_date" nullable="true" remarks="A code will be visible to the users if the value is not set or the current date is not later than the date value of this column." size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="create_date" nullable="false" remarks="When the value was inserted/created" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="5" name="update_date" nullable="false" remarks="When the value was modified" size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="create_user" nullable="false" remarks="The database user who initially created the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="update_user" nullable="false" remarks="The database user who modified the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="naics_year" nullable="true" remarks="The year on which the code was created by Statistics Canada" size="255" type="varchar" typeCode="12"/>
         <primaryKey column="naics_code" sequenceNumberInPK="1"/>
         <index name="naics_code_id_pk" unique="true">
            <column ascending="true" name="naics_code"/>
         </index>
         <index name="naics_code_effective_date_expiry_date_idx" unique="false">
            <column ascending="true" name="effective_date"/>
            <column ascending="true" name="expiry_date"/>
         </index>
      </table>
      <table name="pay_transparency_calculated_data" remarks="This table holds the statistics for a company's pay transparency report that shows any pay disparity between genders. Every report has 57 records (ie. statistics) in this table, collectively known as 'calculated data'. The records in this table are statistics calculated from the file submitted by users and are used in the report. Records are identified and described by a `calculation_code_id` from the `calculation_code` table. If insufficient data prevents a statistic from being calculated, a record is still created with a null `value` and `is_suppressed` set as true.&#10;Calculated data linked to draft reports that are older than 48 hours are deleted automatically on a schedule." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="calculated_data_id" nullable="false" remarks="The primary ID to identify this specific record in the table." size="2147483647" type="uuid" typeCode="1111">
            <child column="calculated_data_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="calculated_data_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="report_id" nullable="false" remarks="Identifies which report that this calculated data is associated with. This references the primary key of `pay_transparency_report` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="report_id" foreignKey="calculated_data_report_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="calculation_code_id" nullable="false" remarks="Identifies which statistic this record is storing. References the primary key of `calculation_code` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="calculation_code_id" foreignKey="calculation_code_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="calculation_code"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="value" nullable="true" remarks="The statistic that indicates any disparity in gender pay, which will be shown as a graph in the resulting report. If there is insufficient information to calculate the statistic, `value` will be null." size="50" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="is_suppressed" nullable="false" remarks="Will be set to true if there is not enough information to calculate a statistic. Suppressed statistics are not included in the outputted report." size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="5" name="create_date" nullable="false" remarks="The date and time when this record was inserted. This is used for deleting calculated data records associated with draft reports that are older than 48 hours." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="6" name="update_date" nullable="false" remarks="The date and time when this record was modified. Records cannot be modified from the webapp, instead the user is required to submit a new report." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_USER" digits="0" id="7" name="create_user" nullable="false" remarks="The username of the database user who created the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_USER" digits="0" id="8" name="update_user" nullable="false" remarks="The username of the database user who modified the record. Records cannot be modified from the webapp, instead the user is required to submit a new report." size="255" type="varchar" typeCode="12"/>
         <primaryKey column="calculated_data_id" sequenceNumberInPK="1"/>
         <index name="calculated_data_pk" unique="true">
            <column ascending="true" name="calculated_data_id"/>
         </index>
         <index name="pay_transparency_calculated_d_report_id_calculation_code_id_key" unique="true">
            <column ascending="true" name="report_id"/>
            <column ascending="true" name="calculation_code_id"/>
         </index>
         <index name="pay_transparency_calculated_data_report_id_idx" unique="false">
            <column ascending="true" name="report_id"/>
         </index>
         <index name="pay_transparency_calculated_data_report_id_is_suppressed_idx" unique="false">
            <column ascending="true" name="report_id"/>
            <column ascending="true" name="is_suppressed"/>
         </index>
      </table>
      <table name="pay_transparency_company" remarks="These are the details provided by a BCeID Business account for a logged in user. The name and address will be included on a report.&#10;If a user logs in without a BCeID Business account, or if the BCeID Business account is missing information, the login will not proceed and the record will not be created." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="company_id" nullable="false" remarks="Primary unique ID for this company. Referenced on the `pay_transparency_report` table." size="2147483647" type="uuid" typeCode="1111">
            <child column="company_id" foreignKey="company_history_company_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="company_history"/>
            <child column="company_id" foreignKey="report_pt_company_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
            <child column="company_id" foreignKey="report_history_company_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="report_history"/>
            <child column="company_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="reports_calculated_data_view"/>
            <child column="company_id" foreignKey="error_pt_company_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="user_error"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="bceid_business_guid" nullable="false" remarks="The BCeID unique ID for this company. Used to associate a user with a company." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="company_name" nullable="false" remarks="The name of the employer provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="3" name="create_date" nullable="false" remarks="The date this company record was entered into the database." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="update_date" nullable="false" remarks="The date this company record was last updated. The record is updated if there are changes. The old record is copied to the `company_history` table." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="address_line1" nullable="true" remarks="Street address provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="address_line2" nullable="true" remarks="Optional second address line provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="city" nullable="true" remarks="City provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="8" name="province" nullable="true" remarks="Province provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="9" name="country" nullable="true" remarks="Country provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="postal_code" nullable="true" remarks="Postal Code provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <primaryKey column="company_id" sequenceNumberInPK="1"/>
         <index name="company_id_pk" unique="true">
            <column ascending="true" name="company_id"/>
         </index>
         <index name="company_bceid_business_guid_uk" unique="true">
            <column ascending="true" name="bceid_business_guid"/>
         </index>
         <index name="pay_transparency_company_bceid_business_guid_idx" unique="false">
            <column ascending="true" name="bceid_business_guid"/>
         </index>
      </table>
      <table name="pay_transparency_report" remarks="This table stores the latest versions of draft and published reports. Each report is submitted by a BCeID user, identified by `user_id`, and is associated with an employer with a BCeID Business account, identified by `company_id`.&#10;Reports are created after the user submits the form in the webapp. Initially `report_status` will be 'draft', but the user can choose to publish the report which changes it's `report_status` to 'published'. The form allows the user to select `employee_count_range_id`, `naics_code`, `reporting_year`, `report_start_date`, `report_end_date`, `user_comment`, and `data_constraints`.&#10;&#10;Each employer will have one published report per `reporting_year`. When a draft report is published, the existing published report (if there is one) will be copied into the `report_history` table. Once a report is published, the `report_id` will stay the same even if it is updated. `revision` keeps track of the number of times a report has been updated after being published.&#10;&#10;Reports that have a `create_date` older than 30 days are locked on a schedule run daily. Reports with `is_unlocked` set to false, cannot be modified by the user. An admin can set `is_unlocked` to true, which will allow the user to publish a new report for the same `reporting_year`. After 3 days, it will automatically be locked again. Changes in `is_unlocked` is also stored in `report_history` table which is used to show admin users how frequently a report has been unlocked.&#10;&#10;Reports can also be withdrawn by an admin user, which changes the `report_status` to 'Withdrawn'. Withdrawn reports are not visible to the user or admin-users. The `admin_user_id` and `admin_modified_date` columns are used to track which admin user withdrew the report and when it was done.&#10;&#10;Draft reports that are older than 48 hours are deleted automatically on a schedule." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="report_id" nullable="false" remarks="Primary unique ID for this report. Even when a published report is updated, this ID stays the same." size="2147483647" type="uuid" typeCode="1111">
            <child column="report_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="calculated_data_history"/>
            <child column="report_id" foreignKey="calculated_data_report_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_calculated_data"/>
            <child column="report_id" foreignKey="report_history_report_id" implied="false" onDeleteCascade="false" schema="pay_transparency" table="report_history"/>
            <child column="report_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="reports_calculated_data_view"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="company_id" nullable="false" remarks="The employer (a BCeID Business) the report is made for. This references the primary key of `pay_transparency_company` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="company_id" foreignKey="report_pt_company_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_company"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="user_id" nullable="false" remarks="The user who created/modified this report. This references the primary key of `pay_transparency_user` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="user_id" foreignKey="report_pt_user_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="user_comment" nullable="true" remarks="User optionally fills this text area on the form, called &quot;Employer statement&quot;, which is shown at the top of the report. This is for additional information about the employer." size="2147483647" type="text" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="employee_count_range_id" nullable="false" remarks="User selects range indicating the number of employees an employer has on the form, which is shown on the report. This references the primary key of `employee_count_range` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="employee_count_range_id" foreignKey="report_employee_count_range_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="employee_count_range"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="naics_code" nullable="false" remarks="User selects the NAICS code for their business on the form, which is shown on the report. This references the primary key of `naics_code` table." size="5" type="varchar" typeCode="12">
            <parent column="naics_code" foreignKey="pay_transparency_report_naics_code_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="naics_code"/>
         </column>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="0" id="6" name="report_start_date" nullable="false" remarks="Start date of the report, which is shown on the report, and always a year before the end date. The range could be a calendar year, fiscal year, school year, or any range the employer prefers. A user can choose either the start date or end date for the report on the form. The other date is automatically calculated." size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="0" id="7" name="report_end_date" nullable="false" remarks="End date of the report, which is shown on the report, and always a year before the end date. A user can choose either the start date or end date for the report on the form. The other date is automatically calculated." size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="8" name="create_date" nullable="false" remarks="The date and time when the first `revision` was inserted. This is used for locking published reports older than 30 days." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="9" name="update_date" nullable="false" remarks="The date and time when this `revision` was modified. This is used for deleting draft reports older than 24 hours." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_USER" digits="0" id="10" name="create_user" nullable="false" remarks="The username of the database user who created the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_USER" digits="0" id="11" name="update_user" nullable="false" remarks="The username of the database user who modified the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="'Draft'::character varying" digits="0" id="12" name="report_status" nullable="true" remarks="Reports are first created with the status of 'Draft' and the user can publish their report which changes the status to 'Published'. An Admin can also withdraw a report, which changes the status to 'Withdrawn'. Withdrawn reports are not visible to the user or admin-user." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="13" name="revision" nullable="false" remarks="Every published report has a revision. Each time a published report is replaced the revision goes up." size="0" type="numeric" typeCode="2"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="14" name="data_constraints" nullable="true" remarks="User optionally fills this text area on the form, which is shown at the bottom of the report. This is for any relevant information, such as limitations, constraints, or dependencies, that may help explain the employers payroll data." size="2147483647" type="text" typeCode="12"/>
         <column autoUpdated="false" defaultValue="true" digits="0" id="15" name="is_unlocked" nullable="false" remarks="This signifies when a published report can be modified or not. Draft reports can always be created regardless of this field.&#10;&#10;When `is_unlocked` is true on a published report, then a draft report in the same `reporting_year` can be published overwriting the existing published report.&#10;&#10;Published reports are unlocked for 30 days from the `create_date` before they are automatically locked by a schedule. Administrators can unlock a report, which will be locked again after 3 days from `report_unlock_date`." size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="16" name="reporting_year" nullable="false" remarks="User selects the calendar year this report is for. Each employer is limited to one report annually. This is distinct from the report's start and end dates as employers may generate reports for any period, like a fiscal or school year, yet the specific year the report pertains to may not be discernible from those dates." size="0" type="numeric" typeCode="2"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="17" name="report_unlock_date" nullable="true" remarks="This date is set by an administrator and is used by a scheduled task to change `is_unlocked` to false after 3 days." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="18" name="admin_user_id" nullable="true" remarks="Admin user who either locked/unlocked report, or withdrew the report. Related to `admin_modified_date`." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="admin_user_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="6" id="19" name="admin_modified_date" nullable="true" remarks="The time when an admin user locked, unlocked, or withdrew a report." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="20" name="admin_last_access_date" nullable="true" remarks="The time when an admin user last looked at this report." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="21" name="admin_modified_reason" nullable="true" remarks="Action by admin when modifying the report. LOCK, UNLOCK, WITHDRAW, REPORTYEAR" size="255" type="varchar" typeCode="12"/>
         <primaryKey column="report_id" sequenceNumberInPK="1"/>
         <index name="report_id_pk" unique="true">
            <column ascending="true" name="report_id"/>
         </index>
         <index name="pay_transparency_report_company_id_create_date_report_year_idx" unique="false">
            <column ascending="true" name="company_id"/>
            <column ascending="true" name="create_date"/>
            <column ascending="true" name="reporting_year"/>
            <column ascending="true" name="report_status"/>
         </index>
         <index name="pay_transparency_report_company_id_reporting_year_report_idx" unique="false">
            <column ascending="true" name="company_id"/>
            <column ascending="true" name="reporting_year"/>
            <column ascending="true" name="report_status"/>
         </index>
         <index name="pay_transparency_report_create_date_report_status_idx" unique="false">
            <column ascending="true" name="create_date"/>
            <column ascending="true" name="report_status"/>
         </index>
         <index name="pay_transparency_report_report_id_company_id_idx" unique="false">
            <column ascending="true" name="report_id"/>
            <column ascending="true" name="company_id"/>
         </index>
         <index name="pay_transparency_report_report_unlock_date_is_unlocked_idx" unique="false">
            <column ascending="true" name="report_unlock_date"/>
            <column ascending="true" name="is_unlocked"/>
         </index>
         <index name="pay_transparency_report_uk" unique="true">
            <column ascending="true" name="company_id"/>
            <column ascending="true" name="user_id"/>
            <column ascending="true" name="reporting_year"/>
            <column ascending="true" name="report_status"/>
         </index>
         <checkConstraint constraint="((report_status)::text = ANY ((ARRAY['Draft'::character varying, 'Published'::character varying, 'Withdrawn'::character varying])::text[]))" name="report_status_check"/>
      </table>
      <table name="pay_transparency_user" remarks="Users log in with their BCeID account which must be associated with a BCeID business account. The unique ID's of both accounts are stored to identify this user and business in future logins." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="user_id" nullable="false" remarks="Primary unique id used in the two report tables." size="2147483647" type="uuid" typeCode="1111">
            <child column="user_id" foreignKey="report_pt_user_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
            <child column="user_id" foreignKey="report_history_user_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="report_history"/>
            <child column="user_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="reports_calculated_data_view"/>
            <child column="user_id" foreignKey="error_pt_user_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="user_error"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="bceid_user_guid" nullable="false" remarks="The unique id provided by the BCeID service to identify this user." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="bceid_business_guid" nullable="false" remarks="The unique id provided the the BCeID service to identify which employer this user is associated with." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="display_name" nullable="false" remarks="This is the full name of the user." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="create_date" nullable="false" remarks="The date this user record was entered into the database." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="5" name="update_date" nullable="false" remarks="The date this user record was last updated. The record is automatically updated every time the user logs in even if there are no changes." size="29" type="timestamp" typeCode="93"/>
         <primaryKey column="user_id" sequenceNumberInPK="1"/>
         <index name="user_id_pk" unique="true">
            <column ascending="true" name="user_id"/>
         </index>
         <index name="pay_transparency_user_bceid_user_guid_bceid_business_guid_idx" unique="false">
            <column ascending="true" name="bceid_user_guid"/>
            <column ascending="true" name="bceid_business_guid"/>
         </index>
      </table>
      <table name="report_history" remarks="This table stores the report information of old published reports that have been replaced with a new version. Old draft reports are not stored. When a published report is updated, the report's information is copied from `pay_transparency_report` table to the `report_history` table. The purpose and meaning of the report information is described in the description of the `pay_transparency_report` table. Previous reports are not modified and are used as an internal archival record, and are not accessible to the end user. Admin users use this table to see a history of when reports were locked or unlocked." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="report_history_id" nullable="false" remarks="Primary unique id for this history report." size="2147483647" type="uuid" typeCode="1111">
            <child column="report_history_id" foreignKey="calculated_data_history_report_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="calculated_data_history"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="report_id" nullable="false" remarks="The report that this id used to be in the `pay_transparency_report` table. Can be thought of as a grouping; the most recent published report, and all history reports for the same `reporting_year` will have the same `report_id`. This references the primary key of `pay_transparency_report` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="report_id" foreignKey="report_history_report_id" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="company_id" nullable="false" remarks="The employer (a BCeID Business) the report is made for. This references the primary key of `pay_transparency_company` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="company_id" foreignKey="report_history_company_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_company"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="user_id" nullable="false" remarks="The user who created/modified this report. This references the primary key of `pay_transparency_user` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="user_id" foreignKey="report_history_user_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="employee_count_range_id" nullable="false" remarks="User selects range indicating the number of employees an employer has on the form, which is shown on the report. This references the primary key of `employee_count_range` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="employee_count_range_id" foreignKey="report_history_employee_count_range_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="employee_count_range"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="user_comment" nullable="true" remarks="User optionally fills this text area on the form, called &quot;Employer statement&quot;, which is shown at the top of the report. This is for additional information about the employer." size="2147483647" type="text" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="0" id="6" name="report_start_date" nullable="false" remarks="User selects the start date of the report, which is shown on the report. Start date is always a year before the end date. The range could be a calendar year, fiscal year, school year, or any range the employer prefers." size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="0" id="7" name="report_end_date" nullable="false" remarks="User selects the end date of the report, which is shown on the report. End date is always a year after the start date." size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="8" name="create_date" nullable="false" remarks="The date and time when the first `revision` was inserted into the `pay_transparency_report` table." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="9" name="update_date" nullable="false" remarks="The date and time when this `revision` was modified." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="create_user" nullable="false" remarks="The username of the database user who created the record in the `pay_transparency_report` table." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="update_user" nullable="false" remarks="The username of the database user who modified the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="'Draft'::character varying" digits="0" id="12" name="report_status" nullable="true" remarks="History reports will be 'Published' or 'Withdrawn'. Draft reports are never saved to history." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="13" name="naics_code" nullable="false" remarks="User selects the NAICS code for their business on the form, which is shown on the report. This references the primary key of `naics_code` table." size="5" type="varchar" typeCode="12">
            <parent column="naics_code" foreignKey="report_history_naics_code_fkey" implied="false" onDeleteCascade="false" schema="pay_transparency" table="naics_code"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="14" name="data_constraints" nullable="true" remarks="User optionally fills this text area on the form, which is shown at the bottom of the report. This is for any relevant information, such as limitations, constraints, or dependencies, that may help explain the employers payroll data." size="2147483647" type="text" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="15" name="revision" nullable="false" remarks="Every published report has a revision. Each time a published report is replaced the revision goes up." size="0" type="numeric" typeCode="2"/>
         <column autoUpdated="false" defaultValue="true" digits="0" id="16" name="is_unlocked" nullable="false" remarks="History reports are not modified, so this field has no meaning in the `report_history` table. This field will always be 'true' since reports must be unlocked before being replaced and moving to the history table." size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="17" name="reporting_year" nullable="false" remarks="User selected the year this report is for. Each employer is limited to one report annually. This is distinct from the report's start and end dates as employers may generate reports for any period, like a fiscal or school year, yet the specific year the report pertains to may not be discernible from those dates." size="0" type="numeric" typeCode="2"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="18" name="report_unlock_date" nullable="true" remarks="History reports are not modified, so this field has no meaning in the `report_history` table." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="19" name="admin_user_id" nullable="true" remarks="Admin user who either locked/unlocked report, or withdrew the report. Related to `admin_modified_date`." size="2147483647" type="uuid" typeCode="1111">
            <parent column="admin_user_id" foreignKey="admin_user_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="admin_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="6" id="20" name="admin_modified_date" nullable="true" remarks="The time when an admin user locked, unlocked, or withdrew a report." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="21" name="admin_last_access_date" nullable="true" remarks="The time when an admin user last looked at this report." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="22" name="admin_modified_reason" nullable="true" remarks="Action by admin when modifying the report. LOCK, UNLOCK, WITHDRAW, REPORTYEAR" size="255" type="varchar" typeCode="12"/>
         <primaryKey column="report_history_id" sequenceNumberInPK="1"/>
         <index name="report_history_pk" unique="true">
            <column ascending="true" name="report_history_id"/>
         </index>
         <checkConstraint constraint="((report_status)::text = ANY ((ARRAY['Draft'::character varying, 'Published'::character varying, 'Withdrawn'::character varying])::text[]))" name="report_status_check"/>
      </table>
      <table name="reports_calculated_data_view" numRows="0" remarks="This view is a union of the `pay_transparency_report` table and `report_history` table. The columns `naics_code.naics_label` and `employee_count_range.employee_count_range`, as well as the full address and company name from `pay_transparency_company` have been included in this view.&#10;&#10;This view allows the webapp to fetch the most recent report as well as the historical versions of the report in one query.&#10;&#10;Only one new column is created in this view, `report_change_id`, which is used to associate this view with the `calculated_data_view` view. The `is_unlocked` column from the two report tables is not included in this view." schema="pay_transparency" type="VIEW" viewSql=" SELECT report.report_id,&#10;    report.company_id,&#10;    report.user_id,&#10;    report.user_comment,&#10;    report.employee_count_range_id,&#10;    report.naics_code,&#10;    report.report_start_date,&#10;    report.report_end_date,&#10;    report.create_date,&#10;    GREATEST(report.update_date, report.admin_modified_date) AS update_date,&#10;    report.create_user,&#10;    report.update_user,&#10;    report.report_status,&#10;    report.revision,&#10;    report.data_constraints,&#10;    report.is_unlocked,&#10;    report.reporting_year,&#10;    report.report_unlock_date,&#10;    report.admin_user_id,&#10;    report.admin_modified_date,&#10;    report.admin_modified_reason,&#10;    report.admin_last_access_date,&#10;    naics_code.naics_label AS naics_code_label,&#10;    company.company_name,&#10;    company.bceid_business_guid AS company_bceid_business_guid,&#10;    company.address_line1 AS company_address_line1,&#10;    company.address_line2 AS company_address_line2,&#10;    company.city AS company_city,&#10;    company.province AS company_province,&#10;    company.country AS company_country,&#10;    company.postal_code AS company_postal_code,&#10;    employee_count_range.employee_count_range,&#10;    COALESCE(json_agg(json_build_object('value', calc_data.value, 'is_suppressed', calc_data.is_suppressed, 'calculation_code', calc_code.calculation_code)) FILTER (WHERE (calc_data.report_id IS NOT NULL)), '[]'::json) AS calculated_data&#10;   FROM (((((pay_transparency.pay_transparency_report report&#10;     LEFT JOIN pay_transparency.naics_code naics_code ON (((naics_code.naics_code)::text = (report.naics_code)::text)))&#10;     LEFT JOIN pay_transparency.pay_transparency_company company ON ((company.company_id = report.company_id)))&#10;     LEFT JOIN pay_transparency.employee_count_range employee_count_range ON ((employee_count_range.employee_count_range_id = report.employee_count_range_id)))&#10;     LEFT JOIN pay_transparency.pay_transparency_calculated_data calc_data ON ((calc_data.report_id = report.report_id)))&#10;     LEFT JOIN pay_transparency.calculation_code calc_code ON ((calc_code.calculation_code_id = calc_data.calculation_code_id)))&#10;  WHERE ((report.report_status)::text = ANY (ARRAY['Published'::text, 'Withdrawn'::text]))&#10;  GROUP BY report.report_id, report.company_id, report.user_id, report.user_comment, report.employee_count_range_id, report.naics_code, report.report_start_date, report.report_end_date, report.create_date, report.update_date, report.create_user, report.update_user, report.report_status, report.revision, report.data_constraints, report.is_unlocked, report.reporting_year, report.report_unlock_date, report.admin_user_id, report.admin_modified_date, report.admin_modified_reason, report.admin_last_access_date, naics_code.naics_label, company.company_name, company.bceid_business_guid, company.address_line1, company.address_line2, company.city, company.province, company.country, company.postal_code, employee_count_range.employee_count_range&#10;UNION ALL&#10; SELECT report.report_id,&#10;    report.company_id,&#10;    report.user_id,&#10;    report.user_comment,&#10;    report.employee_count_range_id,&#10;    report.naics_code,&#10;    report.report_start_date,&#10;    report.report_end_date,&#10;    report.create_date,&#10;    GREATEST(report.update_date, report.admin_modified_date) AS update_date,&#10;    report.create_user,&#10;    report.update_user,&#10;    report.report_status,&#10;    report.revision,&#10;    report.data_constraints,&#10;    report.is_unlocked,&#10;    report.reporting_year,&#10;    report.report_unlock_date,&#10;    report.admin_user_id,&#10;    report.admin_modified_date,&#10;    report.admin_modified_reason,&#10;    report.admin_last_access_date,&#10;    naics_code.naics_label AS naics_code_label,&#10;    company.company_name,&#10;    company.bceid_business_guid AS company_bceid_business_guid,&#10;    company.address_line1 AS company_address_line1,&#10;    company.address_line2 AS company_address_line2,&#10;    company.city AS company_city,&#10;    company.province AS company_province,&#10;    company.country AS company_country,&#10;    company.postal_code AS company_postal_code,&#10;    employee_count_range.employee_count_range,&#10;    COALESCE(json_agg(json_build_object('value', calc_data.value, 'is_suppressed', calc_data.is_suppressed, 'calculation_code', calc_code.calculation_code)) FILTER (WHERE (calc_data.report_history_id IS NOT NULL)), '[]'::json) AS calculated_data&#10;   FROM (((((pay_transparency.report_history report&#10;     LEFT JOIN pay_transparency.naics_code naics_code ON (((naics_code.naics_code)::text = (report.naics_code)::text)))&#10;     LEFT JOIN pay_transparency.pay_transparency_company company ON ((company.company_id = report.company_id)))&#10;     LEFT JOIN pay_transparency.employee_count_range employee_count_range ON ((employee_count_range.employee_count_range_id = report.employee_count_range_id)))&#10;     LEFT JOIN pay_transparency.calculated_data_history calc_data ON ((calc_data.report_history_id = report.report_history_id)))&#10;     LEFT JOIN pay_transparency.calculation_code calc_code ON ((calc_code.calculation_code_id = calc_data.calculation_code_id)))&#10;  WHERE ((report.report_status)::text = ANY (ARRAY['Published'::text, 'Withdrawn'::text]))&#10;  GROUP BY report.report_id, report.company_id, report.user_id, report.user_comment, report.employee_count_range_id, report.naics_code, report.report_start_date, report.report_end_date, report.create_date, report.update_date, report.create_user, report.update_user, report.report_status, report.revision, report.data_constraints, report.is_unlocked, report.reporting_year, report.report_unlock_date, report.admin_user_id, report.admin_modified_date, report.admin_modified_reason, report.admin_last_access_date, naics_code.naics_label, company.company_name, company.bceid_business_guid, company.address_line1, company.address_line2, company.city, company.province, company.country, company.postal_code, employee_count_range.employee_count_range;">
         <column autoUpdated="false" defaultValue="null" digits="0" id="0" name="report_id" nullable="true" remarks="Primary unique ID for this report. Even when a published report is updated, this ID stays the same." size="2147483647" type="uuid" typeCode="1111">
            <parent column="report_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_report"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="company_id" nullable="true" remarks="The employer (a BCeID Business) the report is made for. This references the primary key of `pay_transparency_company` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="company_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_company"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="user_id" nullable="true" remarks="The user who created/modified this report. This references the primary key of `pay_transparency_user` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="user_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="user_comment" nullable="true" remarks="User optionally fills this text area on the form, called 'Employer statement', which is shown at the top of the report. This is for additional information about the employer.  Value should be HTML." size="2147483647" type="text" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="4" name="employee_count_range_id" nullable="true" remarks="User selects range indicating the number of employees an employer has on the form, which is shown on the report. This references the primary key of `employee_count_range` table." size="2147483647" type="uuid" typeCode="1111">
            <parent column="employee_count_range_id" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="employee_count_range"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="5" name="naics_code" nullable="true" remarks="User selects the NAICS code for their business on the form, which is shown on the report. This references the primary key of `naics_code` table." size="5" type="varchar" typeCode="12">
            <parent column="naics_code" foreignKey="Implied Constraint" implied="true" onDeleteCascade="false" schema="pay_transparency" table="naics_code"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="6" name="report_start_date" nullable="true" remarks="User selects the start date of the report, which is shown on the report. Start date is always a year before the end date. The range could be a calendar year, fiscal year, school year, or any range the employer prefers." size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="7" name="report_end_date" nullable="true" remarks="User selects the end date of the report, which is shown on the report. End date is always a year after the start date." size="13" type="date" typeCode="91"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="8" name="create_date" nullable="true" remarks="The date and time when the first revision was inserted. This is used for locking published reports older than 30 days." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="9" name="update_date" nullable="true" remarks="The date and time when this revision was modified by either a user or admin. This is used as the output of an api to determine the order of reports." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="10" name="create_user" nullable="true" remarks="The username of the database user who created the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="11" name="update_user" nullable="true" remarks="The username of the database user who modified the record." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="12" name="report_status" nullable="true" remarks="Reports are first created with the status of 'Draft' and the user can publish their report which changes the status to 'Published'." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="13" name="revision" nullable="true" remarks="Every published report has a revision. Each time a published report is replaced the revision goes up." size="0" type="numeric" typeCode="2"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="14" name="data_constraints" nullable="true" remarks="User optionally fills this text area on the form, which is shown at the bottom of the report. This is for any relevant information, such as limitations, constraints, or dependencies, that may help explain the employers payroll data. Value should be HTML." size="2147483647" type="text" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="15" name="is_unlocked" nullable="true" remarks="Indicates if the report is unlocked for editing." size="1" type="bool" typeCode="-7"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="16" name="reporting_year" nullable="true" remarks="User selects the year this report is for. Each employer is limited to one report annually. This is distinct from the report's start and end dates as employers may generate reports for any period, like a fiscal or school year, yet the specific year the report pertains to may not be discernible from those dates." size="0" type="numeric" typeCode="2"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="17" name="report_unlock_date" nullable="true" remarks="This date is set by an administrator and is used by a scheduled task to change `is_unlocked` to false after 3 days." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="18" name="admin_user_id" nullable="true" remarks="Admin users can lock a report which updates `report_unlock_date` and `admin_modified_date`. They can also look at reports which updates `admin_last_access_date`." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="19" name="admin_modified_date" nullable="true" remarks="The time when an admin user locked or unlocked a report." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="20" name="admin_modified_reason" nullable="true" remarks="Action by admin when modifying the report. LOCK, UNLOCK, WITHDRAW, REPORTYEAR" size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="6" id="21" name="admin_last_access_date" nullable="true" remarks="The time when an admin user last looked at this report." size="29" type="timestamp" typeCode="93"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="22" name="naics_code_label" nullable="true" remarks="The name of the sector (eg 'Construction') of the NAICS code." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="23" name="company_name" nullable="true" remarks="The name of the employer provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="24" name="company_bceid_business_guid" nullable="true" remarks="The BCeID unique ID for this company. Used to associate a user with a company." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="25" name="company_address_line1" nullable="true" remarks="Street address provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="26" name="company_address_line2" nullable="true" remarks="Optional second address line provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="27" name="company_city" nullable="true" remarks="City provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="28" name="company_province" nullable="true" remarks="Province provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="29" name="company_country" nullable="true" remarks="Country provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="30" name="company_postal_code" nullable="true" remarks="Postal Code provided by BCeID account." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="31" name="employee_count_range" nullable="true" remarks="The name of the employee count record, for example '50-100'." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="32" name="calculated_data" nullable="true" remarks="This JSON column contains the all calculated data for the report instead of being in a separate view due to a limitation of the Database ORM." size="2147483647" type="json" typeCode="1111"/>
      </table>
      <table name="user_error" remarks="When the application servers are configured to enable logging, errors related to file processing will be captured in this table. This logging is currently enabled. The purpose is to find out if there are common errors the users are encountering. Every 6 months a scheduled task will remove from the database any record older than 6 months." schema="pay_transparency" type="TABLE">
         <column autoUpdated="false" defaultValue="gen_random_uuid()" digits="0" id="0" name="user_error_id" nullable="false" remarks="Primary unique ID of the error." size="2147483647" type="uuid" typeCode="1111"/>
         <column autoUpdated="false" defaultValue="null" digits="0" id="1" name="user_id" nullable="false" remarks="The user who experienced the error." size="2147483647" type="uuid" typeCode="1111">
            <parent column="user_id" foreignKey="error_pt_user_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_user"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="2" name="company_id" nullable="false" remarks="The company the user is associated with." size="2147483647" type="uuid" typeCode="1111">
            <parent column="company_id" foreignKey="error_pt_company_id_fk" implied="false" onDeleteCascade="false" schema="pay_transparency" table="pay_transparency_company"/>
         </column>
         <column autoUpdated="false" defaultValue="null" digits="0" id="3" name="error" nullable="false" remarks="The error message generated by the webapp." size="255" type="varchar" typeCode="12"/>
         <column autoUpdated="false" defaultValue="CURRENT_TIMESTAMP" digits="6" id="4" name="create_date" nullable="false" remarks="Time when the error was encountered." size="29" type="timestamp" typeCode="93"/>
         <primaryKey column="user_error_id" sequenceNumberInPK="1"/>
         <index name="user_error_id_pk" unique="true">
            <column ascending="true" name="user_error_id"/>
         </index>
         <index name="user_error_create_date_idx" unique="false">
            <column ascending="true" name="create_date"/>
         </index>
      </table>
   </tables>
</database>
