# https://docs.developer.gov.bc.ca/sysdig-monitor-setup-team/
name: Add Sysdig Team on a Schedule or Manually

on:
  workflow_dispatch:
  schedule:
    - cron: '0 0 * * *'

jobs:
    add-sysdig-team:
      runs-on: ubuntu-24.04
      environment: tools
      steps:
      - uses: actions/checkout@v4
      - uses: bcgov/action-oc-runner@10033668ef4374d9bb78149faa73e4ccda0e93dd # v1.2.3
        name: Login to OpenShift
        with:
          oc_namespace: db4642-tools
          oc_server: ${{ vars.oc_server }}
          oc_token: ${{ secrets.oc_token }} 
          commands: | 
            oc project db4642-tools # Safeguard!
            oc apply -f ./sysdig/sysdig.yml